<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" type="text/css" href="style.scss" />
  <link rel="stylesheet" type="text/css" href="header.scss" />
  <link rel="stylesheet" type="text/css" href="content.scss" />
  <link rel="stylesheet" type="text/css" href="content-nav.scss" />
  <script defer src="index.js"></script>
  <script async src="https://static.codepen.io/assets/embed/ei.js"></script>

  <title>JavaScript - Arrow function</title>
</head>

<body>
  <div class="cursor"></div>
  <!-- Header -->

  <header id="header" class="header">
    <nav class="header__nav">
      <ul class="header__nav-list">
        <li class="header__nav-list--item">
          <a class="header__nav-list--link">Courses</a>
        </li>
        <li class="header__nav-list--item">
          <a class="header__nav-list--link">Exercises</a>
        </li>
        <li class="header__nav-list--item">
          <a class="header__nav-list--link">Contact</a>
        </li>
      </ul>
    </nav>
  </header>

  <!-- Content -->
  <main id="content__main" class="content__main">


    <!-- Menu left -->

    <section class="content__section content__section--left">
      <nav class="content__nav-left">
        <ul class="content__nav-left-list">
          <li class="content__nav-left-list--item navIsActive">
            <a class="content__nav-left-list--link"  href="./const-let.html">Const & let</a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./template-strings.html">Template Strings</a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./enhanced-object-literals.html">Enhanced Object Literals</a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./arrow-function.html">Arrow functions</a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./default-function-arguments.html">Default Function Arguments</a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./array-methods.html">Array Methods</a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./rest-spread-operator.html">Rest and Spread operator </a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link"href="./destructuring.html" >Destructuring </a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./classes.html">Classes </a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./generators.html">Generators </a>
          </li>
          <li class="content__nav-left-list--item">
            <a class="content__nav-left-list--link" href="./promises-fetch.html">Promises and Fetch </a>
          </li>
        </ul>
      </nav>
    </section>



    <!-- Content right -->

    <section class="content__section content__section--right">

      <!-- Menu right -->

      <nav class="nav content__nav">
        <ul class="nav__list">
          <li class="nav__list--item">
            <a class="nav__list--link">LN</a>
          </li>
          <li class="nav__list--item">
            <a class="nav__list--link">GH</a>
          </li>
          <li class="nav__list--item">
            <a class="nav__list--link">Web</a>
          </li>
          <li class="nav__list--item">
            <a class="nav__list--link">Dri</a>
          </li>
        </ul>
      </nav>

      <!-- Content Article -->

      <article class="content__article">
        <div class="article__title-container">
          <h1 class="article__title">Arrow function</h1>
          <span class="article__title--part">part 2</span>
        </div>

        <div class="article__container">
          <!-- content -->
          <div class="article__container-content">
            <p class="article__content--text">
              <code>
                <pre class="article__content--code article__content--pre">
    const teamES5 = {
        members: ["Vnk", "Dgen"],
        teamName: "Hellloooo",
        teamSummary: function() {
          return this.members.map(function(member) {
            // Uncomment to see the error
            // return `${member} is on team ${this.teamName}`
          });
        }
    };

    console.log(teamES5.teamSummary());
    // TypeError: Cannot read property 'teamName' of undefined
                </pre>
              </code>
            </p>
            <p class="article__content--text">On exécute donc une fonction appelée "teamSummary". Et à l'intérieur, on appelle "membres.map". Lorsqu'on appelle "members.map", on passe dans notre fonction d'itérateur. Maintenant, cette fonction qu'on crée, on la transfére à un autre élément de notre base de code. La valeur de l'intérieur de cette fonction est perdue et c'est exactement ce qui se passe ici.</p>
            <p class="article__content--text">
              <code>
                <pre class="article__content--code article__content--pre">
    const teamES5Bind = {
        members: ["Vnk", "Dgen"],
        teamName: "Hellloooo",
        teamSummary: function() {
          return this.members.map(
            function(member) {
              return `${member} is on team ${this.teamName}`;
            }.bind(this)
          );
        }
    };

    console.log("ES5 Bind :", teamES5Bind.teamSummary());
    ES5 Bind : ["Vnk is on team Hellloooo", "Dgen is on team Hellloooo"]

                </pre>
              </code>
            </p>
            <p class="article__content--text">On peut utiliser l'helper "bind" pour afin d'adapter le contexte de la fonction au contexte courant, ce qui signifie que lorsqu'on invoque effectivement la fonction, la valeur de celle-ci sera correcte.</p>
            <p class="article__content--text">
              <code>
                <pre class="article__content--code article__content--pre">
    const teamES6 = {
        members: ["Vnk", "Dgen"],
        teamName: "Hellloooo",
        teamSummary: function() {
          // this === team
          return this.members.map(member => {
            return `${member} is on team ${this.teamName}`;
          });
        }
    };

    console.log("ES6 : ", teamES6.teamSummary());
    ES6 : ["Vnk is on team Hellloooo", "Dgen is on team Hellloooo"]
                </pre>
              </code>
            </p>
            <p class="article__content--text">La fonction fléchée utilise ce qu'on appelle <strong>lexical this</strong></p>
            <p class="article__content--text">Le mot <strong>lexical</strong> signifie que l'emplacement de ce terme dépend de la façon dont il est interprété ou évalué. Ainsi, selon l'endroit où on place le mot <strong>this</strong>, il changera lorsqu'on  utilise une fonction fléchée.</p>
            <p class="article__content--text">Lorsque l'on utilise une fonction fléché et que l'on fait référence à <strong>this</strong> à l'intérieur, <strong>this</strong> est automatiquement définie comme égale à <strong>this</strong> dans le <strong>contexte environnant (surrounding context)</strong> (qui dans ce cas est égal à notre "team").</p>

            <div class="article__content-container-link">
              <a class="article__content--text article__content--link" href="./arrow-function.html">Voir part 1</a>
            </div>
          </div>

          <!-- code example -->
          <div class="article__example">
            <iframe class="article__example--code"
              src="https://codesandbox.io/embed/still-frog-o36jk?fontsize=14&hidenavigation=1&theme=dark"
              title="Arrow Function p2"
              allow="geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb"
              sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>
          </div>
        </div>

      </article>


    </section>
  </main>
</body>

</html>
